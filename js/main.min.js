!function(w){"use strict";const URL="../api/main.php";let questions=[{id:1,que:"IC chips used in computers are usually made of:",yes:1,ch1:"Lead",ch2:"Silicon",ch3:"Chromium",ch4:"Potato"},{id:2,que:"WWW stands for ?",yes:0,ch1:"World Wide Web",ch2:"Chipmunk",ch3:"Children",ch4:"Wide World Web"},{id:3,que:"If a computer has more than one processor then it is known as ?",yes:0,ch1:"Multiprocessor",ch2:"Silicon",ch3:"Brouhaha",ch4:"Doozy"},{id:4,que:"Full form of URL is ?",yes:1,ch1:"Multiprocessor",ch2:"Uniform Resource Locator",ch3:"Snollygoster",ch4:"Uniform Registered Link"},{id:5,que:"What is the Italian word for pie? ",yes:2,ch1:"Comeuppance",ch2:"Cakes",ch3:"Pizza",ch4:"Jazz"},{id:5,que:"Which country flag is it?",yes:2,ch1:"Lithuania",ch2:"Estonia",ch3:"Latvia",ch4:"Polska",img:"img/19.jpg"}],star,starBtn,getMainDiv,getImagDiv,getQuestio,transwer;w.fetch(URL).then(response=>response.json()).then(response=>{questions=response}).catch(e=>{console.log(`failed to load DB default 9 questions loaded: ${e}`)});let score=0,getMessage,question=0,stat,seco,seconds=30,tim=0;function CreateElem(e,className,id,text,src){return this instanceof CreateElem?(e=document.createElement(e),id&&(e.id=id),className&&(e.className=className),text&&(e.innerText=text),src&&(e.src=src,e.setAttribute("alt","img")),e):new CreateElem(e,className,id)}function remElements(elementId){const element=document.getElementById(elementId);if(element)if(element.children.length)for(;element.firstChild;)element.removeChild(element.firstChild);else element.parentNode.removeChild(element)}function inits(){getMainDiv=document.getElementById("main"),getImagDiv=document.getElementById("imag"),getQuestio=document.getElementById("ques"),getMessage=document.getElementById("mess"),starBtn=document.getElementById("starBtn"),star=document.getElementById("star"),stat=document.getElementById("stat"),seco=document.getElementById("seco"),getMainDiv.addEventListener("mouseup",loopElems)}function loded(){if(starBtn.innerHTML="start",!w.localStorage.wZfZrT2N14M6NdG9bbrI){const el=document.createElement("p"),di=document.createElement("div");el.innerHTML='This game is using <a href="https://en.wikipedia.org/wiki/Web_storage#Local_and_session_storage" target="_blank" rel="noopener noreferrer">localStorage</a>. By playing you agree to store data in localStorage',di.appendChild(el),starBtn.parentNode.insertBefore(di,starBtn.nextSibling)}starBtn.addEventListener("click",start),[question,score]=[+readValue()[0],+readValue()[1]],question>0&&(starBtn.innerText="continue")}function addQuestions(question){questions[question]||(question=0);const{id:id,que:que,img:img,yes:yes,...rest}=questions[question],answer=Object.keys(rest)[yes];if(transwer=answer,void 0!==img){let imgSrc;imgSrc=-1!==img.indexOf("href")?"img/"+(img||"d.png"):img;const im=new CreateElem("img","img","img","",imgSrc);getImagDiv.appendChild(im)}const qu=new CreateElem("div","q","q",que),lenthOfRes=Object.keys(rest).length,ans=[];for(let i=0;i<lenthOfRes;i++)rest[Object.keys(rest)[i]]&&ans.push(new CreateElem("button","btn tips trans",Object.keys(rest)[i],rest[Object.keys(rest)[i]]));ans.map(el=>getMainDiv.appendChild(el)),getQuestio.appendChild(qu)}function show(){const elems=[...document.getElementsByClassName("tips")];for(let i=elems.length-1;i>=0;i--)elems[i].classList.toggle("trans")}function updateStat(){const va=question;stat.innerText=va+1+"/"+questions.length}function start(){addQuestions(question),setTimeout(show,500),hide.call(getMessage),countdown(),updateStat()}function loopElems(elem){if(clearTimeout(tim),!elem.target.classList.contains("tips"))return;sele.call(elem.target);const getAllansw=[...document.getElementsByClassName("tips")];getAllansw.forEach(element=>{element.id!==transwer?nno.call(element):yyes.call(element),element.disabled=!0,element.style.pointerEvents="none"});const elems=document.getElementById("id"+question);elem.target.id===transwer?(sele.bind(elems),yyes.call(getQuestio),score++):(nno.call(getQuestio),nno.bind(elems),w.navigator.vibrate(300)),nextQuest()}function nextQuest(){seconds=30,question++,question<questions.length&&createItem(question,score),setTimeout(()=>{show(),setTimeout(()=>{remElements("img"),remElements("q"),remElements("main"),getQuestio.className="bg",question===questions.length&&(question=0,star.innerText="Your score: "+score+"/"+questions.length,questions.length===score?(star.innerText+="\nvictory",starBtn.innerText="Repeat"):starBtn.innerText="Improve",getMessage.classList.remove("hide"),score=0,createItem(question,score)),question>0&&start()},0)},1500)}function hide(){this.classList.add("hide")}function sele(){this.classList.add("sele")}function yyes(){this.classList.add("yyes")}function nno(){void 0!==this&&this.classList.add("nno")}function createItem(q,s){storageAvailable("localStorage")?(w.localStorage.setItem("wZfZrT2N14M6NdG9bbrI",q),w.localStorage.setItem("d2SemiF4K6jUP1rrLI9j",s)):console.log("No localstorage")}function readValue(){if(storageAvailable("localStorage")){const x=w.localStorage.getItem("wZfZrT2N14M6NdG9bbrI"),a=w.localStorage.getItem("d2SemiF4K6jUP1rrLI9j");return[x,a]}console.log("No localstorage")}function storageAvailable(type){try{const storage=w[type],x="__storage_test__";return storage.setItem(x,x),storage.removeItem(x),!0}catch(e){return!1}}function countdown(){seco.innerText=seconds,--seconds>0?tim=setTimeout(()=>{countdown()},1e3):(nextQuest(),clearTimeout(tim))}document.addEventListener("DOMContentLoaded",inits),w.addEventListener("load",loded)}(window);